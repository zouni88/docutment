## linux 编译 ffmpeg
1. 下载源码  
    [下载ffmpeg源码](https://github.com/FFmpeg/FFmpeg)

    或者通过git down源码：
        git@github.com:FFmpeg/FFmpeg.git
2. 进入源码根目录，执行`./configure` 出现如下错误：  
```shell
small@西凉观云海:~/FFmpeg-master$ ./configure
nasm/yasm not found or too old. Use --disable-x86asm for a crippled build.

If you think configure made a mistake, make sure you are using the latest
version from Git.  If the latest version fails, report the problem to the
ffmpeg-user@ffmpeg.org mailing list or IRC #ffmpeg on irc.freenode.net.
Include the log file "ffbuild/config.log" produced by configure as this will help
solve the problem.
```
> 大概意思是，yasm没找到，需要下载yasm汇编器

3. [下载yasm汇编器](https://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz)

```shell
wget https://www.tortall.net/projects/yasm/releases/yasm-1.3.0.tar.gz  
```

解压安装  :  
```shell
tar -zxvf yasm-1.3.0.tar.gz
```
进入解压后目录 
```
cd yasm-1.3.0

./configure
# 接着 
make 
sudo make install
```
接着返回 ffmpeg目录，执行命令
```
./configure

./configure --prefix="/usr/local/ffmpeg/" --enable-libx264 --enable-gpl --enable-nonfree --enable-libfdk-aac
```
出现如下显示就代表成功了：
```shell
small@small:~/FFmpeg$ ./configure
install prefix            /usr/local
source path               .
C compiler                gcc
C library                 glibc
ARCH                      x86 (generic)
big-endian                no
runtime cpu detection     yes
standalone assembly       yes
x86 assembler             yasm
MMX enabled               yes
MMXEXT enabled            yes
3DNow! enabled            yes
3DNow! extended enabled   yes
SSE enabled               yes
SSSE3 enabled             yes
AESNI enabled             yes
AVX enabled               yes
AVX2 enabled              yes
AVX-512 enabled           yes
XOP enabled               yes
...
```
## windows 编译 ffmpeg
1. 下载 MinGW-w64 + MSYS 环境

这个地址有问题
http://www.mingw.org/wiki/MSYS  
访问这个地址：
http://www.mingw-w64.org/doku.php

## 启用libfdk_aac和libx264模块支持
出现如下错误
1. ERROR: libfdk_aac not found
```shell
small@small:~/FFmpeg$ ./configure --enable-libx264 --enable-libfdk-aac --enable-gpl --enable-nonfree
ERROR: libfdk_aac not found

If you think configure made a mistake, make sure you are using the latest
version from Git.  If the latest version fails, report the problem to the
ffmpeg-user@ffmpeg.org mailing list or IRC #ffmpeg on irc.freenode.net.
Include the log file "ffbuild/config.log" produced by configure as this will help
solve the problem.
```
[下载libfdk_aac库](https://sourceforge.net/projects/opencore-amr/files/fdk-aac/)：
https://sourceforge.net/projects/opencore-amr/files/fdk-aac/
```shell
./configure  # 配置
make  # 编译
make install # 编译安装
```

2. ERROR: libx264 not found
```shell
small@small:~/FFmpeg$ ./configure --enable-libx264 --enable-libfdk-aac --
ERROR: libx264 not found

If you think configure made a mistake, make sure you are using the latest
version from Git.  If the latest version fails, report the problem to the
ffmpeg-user@ffmpeg.org mailing list or IRC #ffmpeg on irc.freenode.net.
Include the log file "ffbuild/config.log" produced by configure as this will help
solve the problem.

```
[下载libx264](https://www.videolan.org/developers/x264.html) ：https://www.videolan.org/developers/x264.html

代码库：git clone https://code.videolan.org/videolan/x264.git  
下载完继续：
```shell
./configure  --enable-shared
make  
make install
```
还没完，又出现新的错误了：
```shell
small@small:~/x264$ ./configure
Found no assembler
Minimum version is nasm-2.13
If you really want to compile without asm, configure with --disable-asm.
```
[下载nasm目前最新版](https://www.nasm.us/pub/nasm/releasebuilds/2.15/) :https://www.nasm.us/pub/nasm/releasebuilds/2.15/
继续编译安装：
```shell
./configure  
make  
make install
```

回到上一步，继续编译x264:
```shell
./configure  --enable-shared # --enable-shared 这里很重要
make  
make install
```
最终回到ffmpeg继续编译:
```shell
small@small:~/FFmpeg$ ./configure --enable-libx264 --enable-libfdk-aac --
small@small:~/FFmpeg$ make
small@small:~/FFmpeg$ make install
```




